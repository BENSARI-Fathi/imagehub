(this["webpackJsonpimagehub-frontend"]=this["webpackJsonpimagehub-frontend"]||[]).push([[0],{100:function(e,t,r){},106:function(e,t,r){},128:function(e,t,r){},129:function(e,t,r){},130:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(7),c=r.n(a),s=(r(98),r(99),r(100),r(2));var o=function(){return Object(s.jsx)("footer",{className:"footer__style",children:Object(s.jsx)("p",{children:"Copyright \xa9 Imagehub"})})},i=r(13),l=r.n(i),u=r(21),p=r(37),d=r(163),j=r(166),h=r(53),b=r(169),f=r(76),O=r.n(f),x=r(167),v=r(182),g=r(77),m=r.n(g),y=r(78),_=r.n(y),S=r(180),I=r(171),k=r(17),E=(r(106),r(168)),w=r(11),R=r(32),L="USER_LOGIN_REQUEST",T="USER_LOGIN_SUCCESS",N="USER_LOGIN_FAIL",U="USER_LOGOUT",C="USER_DETAILS_REQUEST",D="USER_DETAILS_SUCCESS",A="USER_DETAILS_FAIL",P=r(71),F=r.n(P).a.create({baseURL:"http://localhost:5000/api/v1",timeout:5e3,headers:{Authorization:localStorage.getItem("userInfo")?"Bearer "+JSON.parse(localStorage.getItem("userInfo")).access_token:null}});F.interceptors.response.use((function(e){return e}),function(){var e=Object(u.a)(l.a.mark((function e(t){var r,n,a,c,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.config,"Token is expired"!==t.response.data||401!==t.response.status){e.next=37;break}if(n=JSON.parse(localStorage.getItem("userInfo")),!(a=n.refresh_token)){e.next=35;break}if(c=JSON.parse(atob(a.split(".")[1])),s=Math.ceil(Date.now()/1e3),console.log(c.exp),!(c.exp>s)){e.next=30;break}return e.prev=9,e.next=12,F.post("/token/refresh/",{refresh_token:a});case 12:return o=e.sent,n.access_token=o.data.access_token,n.refresh_refresh=o.data.refresh_token,localStorage.setItem("userInfo",JSON.stringify(n)),F.defaults.headers.Authorization="Bearer "+o.data.access_token,r.headers.Authorization="Bearer "+o.data.access_token,e.next=20,F(r);case 20:return e.abrupt("return",e.sent);case 23:e.prev=23,e.t0=e.catch(9),console.log("error here :",e.t0),localStorage.removeItem("userInfo"),window.location="/login/";case 28:e.next=33;break;case 30:console.log("Refresh token is expired",c.exp,s),localStorage.removeItem("userInfo"),window.location="/login/";case 33:e.next=37;break;case 35:console.log("Refresh token not available."),window.location="/login/";case 37:return e.abrupt("return",Promise.reject(t));case 38:case"end":return e.stop()}}),e,null,[[9,23]])})));return function(t){return e.apply(this,arguments)}}());var J=F;var Y=function(){var e=Object(k.b)(),t=Object(w.f)(),r=Object(k.c)((function(e){return e.userLogin})).userInfo,a=Object(k.c)((function(e){return e.userDetail})),c=a.user,o=a.loading;Object(n.useEffect)((function(){if(r){var t=JSON.parse(atob(r.access_token.split(".")[1])).user_id;e(function(e){return function(){var t=Object(u.a)(l.a.mark((function t(r){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:C}),t.next=4,J.get("user/".concat(e));case 4:n=t.sent,a=n.data,r({type:D,payload:a}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:A,payload:t.t0.response&&t.t0.response.data?t.t0.response.data:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}),[r,e]);var i=Object(n.useState)(null),f=Object(p.a)(i,2),g=f[0],y=f[1],L=Object(n.useState)(""),T=Object(p.a)(L,2),N=T[0],P=T[1],F=function(){y(null)},Y=function(){var t=Object(u.a)(l.a.mark((function t(r){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.get("logout");case 3:n=t.sent,a=n.data,console.log(a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:e(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("userInfo"),t({type:U}),J.defaults.headers.Authorization=null;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y(null);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(s.jsx)(d.a,{position:"static",children:Object(s.jsxs)(j.a,{children:[Object(s.jsx)(x.a,{color:"inherit",onClick:function(e){t.push("/")},children:Object(s.jsx)(O.a,{})}),Object(s.jsx)(h.a,{variant:"h6",align:"justify",className:"navbar__font",children:"Imagehub"}),Object(s.jsxs)("form",{className:"header__search",onSubmit:function(e){e.preventDefault(),e.preventDefault(),N&&t.push("/?q=".concat(N))},children:[Object(s.jsx)(m.a,{className:"header__search_icon"}),Object(s.jsx)("input",{type:"text",placeholder:"Search",onChange:function(e){return P(e.target.value)},className:"header__search_input"})]}),r&&c?Object(s.jsx)(x.a,{color:"inherit",className:"header__avatar",onClick:function(e){y(e.currentTarget)},children:o?Object(s.jsx)("div",{className:"row",children:Object(s.jsx)(E.a,{})}):Object(s.jsx)(v.a,{alt:"Remy Sharp",src:c.avatar})}):Object(s.jsx)(b.a,{variant:"contained",className:"navbar__font header__signin",children:Object(s.jsx)(R.b,{to:"/login",children:"Login"})}),Object(s.jsxs)(S.a,{id:"simple-menu",anchorEl:g,keepMounted:!0,open:Boolean(g),onClose:F,children:[Object(s.jsx)(I.a,{onClick:F,children:Object(s.jsx)(R.b,{to:"/profile",children:"Profile"})}),Object(s.jsx)(I.a,{onClick:Y,children:Object(s.jsx)(_.a,{})})]})]})})},B=r(172),z=r(173),Q=r(174),G=r(175),M=r(177),q=r(176),W="REPOSITORY_LIST_REQUEST",H="REPOSITORY_LIST_SUCCESS",K="REPOSITORY_LIST_FAIL",V="REPOSITORY_DETAILS_REQUEST",X="REPOSITORY_DETAILS_SUCCESS",Z="REPOSITORY_DETAILS_FAIL",$="REPOSITORY_URL_REQUEST",ee="REPOSITORY_URL_SUCCESS",te="REPOSITORY_URL_FAIL",re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(u.a)(l.a.mark((function t(r){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:W}),t.next=4,J.get("repos/".concat(e));case 4:n=t.sent,a=n.data,r({type:H,payload:a}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:K,payload:t.t0.response&&t.t0.response.data?t.t0.response.data:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()};var ne=function(e){var t=e.location,r=Object(k.b)(),a=Object(k.c)((function(e){return e.repositoryList})),c=(a.loading,a.error,a.repository),o=t.search.split("=")[1];return Object(n.useEffect)((function(){r(o?re("search?q=".concat(o)):re())}),[r,o]),Object(s.jsx)("div",{children:c?Object(s.jsx)(B.a,{container:!0,spacing:4,children:c.map((function(e){return Object(s.jsx)(B.a,{item:!0,xs:12,sm:4,children:Object(s.jsxs)(z.a,{children:[Object(s.jsx)(Q.a,{children:Object(s.jsxs)(G.a,{children:[Object(s.jsx)(h.a,{gutterBottom:!0,variant:"h5",component:"h2",children:Object(s.jsx)("strong",{children:e.folder_name})}),Object(s.jsxs)(h.a,{variant:"body2",color:"textSecondary",component:"p",children:["Owner: ",Object(s.jsx)("strong",{children:e.username}),Object(s.jsx)("br",{}),"Published at: ",Object(s.jsx)("strong",{children:new Date(1e3*e.timestamp.T).toDateString()})]})]})}),Object(s.jsx)(q.a,{children:Object(s.jsx)(b.a,{size:"small",color:"primary",children:Object(s.jsx)(R.b,{to:"".concat(e.username,"/").concat(e._id),children:"More ..!"})})})]})},e._id)}))}):Object(s.jsxs)("div",{children:[Object(s.jsx)(M.a,{variant:"text"}),Object(s.jsx)(M.a,{variant:"rect",width:600,height:200})]})})},ae=r(181);r(128);var ce=function(e){var t=e.history,r=Object(k.b)(),a=Object(k.c)((function(e){return e.userLogin})),c=a.loading,o=a.error,i=a.userInfo,d=Object(n.useState)(""),j=Object(p.a)(d,2),h=j[0],b=j[1],f=Object(n.useState)(""),O=Object(p.a)(f,2),x=O[0],v=O[1];return Object(n.useEffect)((function(){i&&t.push("/")}),[t,i]),Object(s.jsxs)("div",{id:"loginform",children:[Object(s.jsx)("h2",{id:"headerTitle",children:"Login"}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r(function(e,t){return function(){var r=Object(u.a)(l.a.mark((function r(n){var a,c;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n({type:L}),r.next=4,J.post("login",{email:e,password:t});case 4:a=r.sent,c=a.data,n({type:T,payload:c}),localStorage.setItem("userInfo",JSON.stringify(c)),J.defaults.headers.Authorization="Bearer "+c.access_token,r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),n({type:N,payload:r.t0.response&&r.t0.response.data?r.t0.response.data:r.t0.message});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}()}(h,x))},children:[o&&Object(s.jsx)(ae.a,{severity:"error",children:o}),c&&Object(s.jsx)("div",{className:"row",children:Object(s.jsx)(E.a,{})}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("label",{children:"Email"}),Object(s.jsx)("input",{type:"email",placeholder:"Enter your email",onChange:function(e){return b(e.target.value)}})]}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("label",{children:"Password"}),Object(s.jsx)("input",{type:"password",placeholder:"Enter your password",onChange:function(e){return v(e.target.value)}})]}),Object(s.jsx)("div",{id:"button",className:"row",children:Object(s.jsx)("button",{type:"submit",children:"Login"})})]})]})},se=r(83),oe=r(170),ie=r(131),le=r(178),ue=r(179),pe=r(79),de=r.n(pe),je=r(80),he=r.n(je);r(129);function be(e){return Object(s.jsx)(ie.a,Object(se.a)({button:!0,component:"a"},e))}var fe=function(e){var t=e.match,r=Object(k.b)(),a=Object(k.c)((function(e){return e.repositoryDetails})),c=a.loading,o=a.error,i=a.repos,p=t.params.repos_id,d=Object(k.c)((function(e){return e.repositoryUrl})),j=d.loading,h=(d.error,d.link);return Object(n.useEffect)((function(){var e;r((e=p,function(){var t=Object(u.a)(l.a.mark((function t(r){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:V}),t.next=4,J.get("repos/".concat(e));case 4:n=t.sent,a=n.data,r({type:X,payload:a}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:Z,payload:t.t0.response&&t.t0.response.data?t.t0.response.data:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[r,p]),Object(n.useEffect)((function(){var e;p&&r((e=p,function(){var t=Object(u.a)(l.a.mark((function t(r){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:$}),t.next=4,J.post("repos/link",{_id:e});case 4:n=t.sent,a=n.data,r({type:ee,payload:a}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r({type:te,payload:t.t0.response&&t.t0.response.data?t.t0.response.data:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[r,p]),Object(s.jsx)("div",{children:c?Object(s.jsxs)("div",{children:[Object(s.jsx)(M.a,{variant:"text"}),Object(s.jsx)(M.a,{variant:"rect",height:400})]}):i?Object(s.jsxs)(B.a,{container:!0,spacing:3,children:[Object(s.jsx)(B.a,{item:!0,xs:12,sm:7,children:i.map((function(e,t){return Object(s.jsx)(oe.a,{component:"nav","aria-label":"main mailbox folders",className:"repos__list",children:Object(s.jsxs)(ie.a,{button:!0,children:[Object(s.jsx)(le.a,{children:Object(s.jsx)(de.a,{})}),Object(s.jsx)(be,{href:e.url,target:"_blank",children:Object(s.jsx)(ue.a,{primary:e.filename})})]})},t)}))}),Object(s.jsx)(B.a,{item:!0,xs:12,sm:5,children:Object(s.jsxs)("div",{children:[Object(s.jsx)("h4",{children:Object(s.jsx)("u",{children:"Repository Link:"})}),j?Object(s.jsx)(E.a,{}):Object(s.jsxs)("div",{className:"repos__link",children:[Object(s.jsx)(he.a,{fontSize:"small",className:"repos__link_icon"}),Object(s.jsx)("input",{type:"text",value:"".concat(h.url),className:"repos__link_input",readOnly:!0})]})]})})]}):Object(s.jsx)("div",{children:o})})};var Oe=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsxs)(R.a,{children:[Object(s.jsx)(Y,{}),Object(s.jsx)("main",{children:Object(s.jsxs)(w.c,{children:[Object(s.jsx)(w.a,{path:"/",exact:!0,component:ne}),Object(s.jsx)(w.a,{path:"/login",exact:!0,component:ce}),Object(s.jsx)(w.a,{path:"/:username/:repos_id",component:fe})]})}),Object(s.jsx)(o,{})]})})},xe=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,184)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},ve=r(81),ge=r(44),me=r(82),ye=Object(ge.combineReducers)({userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return{loading:!0,userInfo:null,error:null};case T:return{loading:!1,userInfo:t.payload,error:null};case N:return{loading:!1,error:t.payload,userInfo:null};case U:return{userInfo:null,loading:null,error:null};default:return e}},userDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return{loading:!0,user:null,error:null};case D:return{loading:!1,user:t.payload,error:null};case A:return{loading:!1,error:t.payload,user:null};default:return e}},repositoryList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return{loading:!0};case H:return{loading:!1,repository:t.payload};case K:return{loading:!1,error:t.payload};default:return e}},repositoryDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return{loading:!0};case X:return{loading:!1,repos:t.payload};case Z:return{loading:!1,error:t.payload};default:return e}},repositoryUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return{loading:!0};case ee:return{loading:!1,link:t.payload};case te:return{loading:!1,error:t.payload};default:return e}}}),_e={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Se=[ve.a],Ie=Object(ge.createStore)(ye,_e,Object(me.composeWithDevTools)(ge.applyMiddleware.apply(void 0,Se)));c.a.render(Object(s.jsx)(k.a,{store:Ie,children:Object(s.jsx)(Oe,{})}),document.getElementById("root")),xe()},98:function(e,t,r){},99:function(e,t,r){}},[[130,1,2]]]);
//# sourceMappingURL=main.c15b703b.chunk.js.map